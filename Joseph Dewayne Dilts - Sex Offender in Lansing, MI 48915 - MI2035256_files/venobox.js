!function(t){function a(){t.ajax({url:C,cache:!1}).done(function(t){P.html('<div class="vbox-inline">'+t+"</div>"),d(!0)}).fail(function(){P.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),d(!0)})}function e(){t(".vbox-preloader").hide(),P.html('<iframe class="venoframe" src="'+C+'"></iframe>'),d()}function i(){var t=C.split("/"),a=t[t.length-1];P.html('<iframe class="venoframe" src="//player.vimeo.com/video/'+a+'"></iframe>'),d()}function o(){var t=C.split("/"),a=t[t.length-1];P.html('<iframe class="venoframe" allowfullscreen src="//www.youtube.com/embed/'+a+'"></iframe>'),d()}function n(){P.html('<div class="vbox-inline">'+t(C).html()+"</div>"),d()}function r(){T=t(".vbox-content").find("img"),T.one("load",function(){d()}).each(function(){this.complete&&t(this).load()})}function d(a){a=a||!1,1!=a&&t(window).scrollTop(0),L.html(I),P.find(">:first-child").addClass("figlio"),t(".figlio").css("width",m).css("height",u).css("padding",g).css("background",f),p=P.outerHeight(),x=t(window).height(),x>p+80?(b=(x-p)/2,P.css("margin-top",b),P.css("margin-bottom",b)):(P.css("margin-top","40px"),P.css("margin-bottom","40px")),P.animate({opacity:"1"},"slow")}function c(){t(".vbox-content").length&&(p=P.height(),x=t(window).height(),x>p+80?(b=(x-p)/2,P.css("margin-top",b),P.css("margin-bottom",b)):(P.css("margin-top","40px"),P.css("margin-bottom","40px")))}var s,l,v,h,m,g,f,u,b,p,x,y,w,k,P,j,C,H,T,E,q,O,A,I,$,z,D,L,M,Q,S,X,B,F;t.fn.extend({venobox:function(d){var c={framewidth:"",frameheight:"",border:"0",bgcolor:"#fff",titleattr:"title",numeratio:!1,infinigall:!1,overlayclose:!0},b=t.extend(c,d);return this.each(function(){var d=t(this);return d.data("venobox")?!0:(d.addClass("vbox-item"),d.data("framewidth",b.framewidth),d.data("frameheight",b.frameheight),d.data("border",b.border),d.data("bgcolor",b.bgcolor),d.data("numeratio",b.numeratio),d.data("infinigall",b.infinigall),d.data("overlayclose",b.overlayclose),d.data("venobox",!0),s=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,l=document.all&&!window.atob?!0:!1,void d.click(function(c){function s(){E=d.data("gall"),y=d.data("numeratio"),k=d.data("infinigall"),q=t('.vbox-item[data-gall="'+E+'"]'),q.length>0&&y===!0?(M.html(q.index(d)+1+" / "+q.length),M.fadeIn()):M.fadeOut(),O=q.eq(q.index(d)+1),A=q.eq(q.index(d)-1),d.attr(b.titleattr)?(I=d.attr(b.titleattr),L.fadeIn()):(I="",L.fadeOut()),q.length>0&&k===!0?($=!0,z=!0,O.length<1&&(O=q.eq(0)),q.index(d)<1&&(A=q.eq(q.index(q.length)))):(O.length>0?(t(".vbox-next").css("display","block"),$=!0):(t(".vbox-next").css("display","none"),$=!1),q.index(d)>0?(t(".vbox-prev").css("display","block"),z=!0):(t(".vbox-prev").css("display","none"),z=!1))}function p(t){27===t.keyCode&&x()}function x(){t("body").unbind("keydown",p),h.fadeOut("normal",function(){h.remove()}),t(".vwrap").css("position","initial")}c.stopPropagation(),c.preventDefault(),d=t(this),v=d.data("overlay"),m=d.data("framewidth"),u=d.data("frameheight"),g=d.data("border"),f=d.data("bgcolor"),$=!1,z=!1,D=!1,C=d.attr("href"),H=t(window).scrollTop(),H=-H,F=d.data("css")||"",j='<div class="vbox-overlay '+F+'" style="background:'+v+'"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>',t("body").append(j),h=t(".vbox-overlay"),w=t(".vbox-container"),P=t(".vbox-content"),M=t(".vbox-num"),L=t(".vbox-title"),P.html(""),P.css("opacity","0"),s(),h.css("min-height",t("#container-wrap").css("height")),l?h.animate({opacity:1},250,function(){h.css({"min-height":t(window).outerHeight(),height:"auto"}),"iframe"==d.data("type")?e():"inline"==d.data("type")?n():"ajax"==d.data("type")?a():"vimeo"==d.data("type")?i():"youtube"==d.data("type")?o():(P.html('<img src="'+C+'">'),r())}):(h.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(c){c.target==c.currentTarget&&(h.css({"min-height":t("#container-wrap").css("height"),height:"auto"}),"iframe"==d.data("type")?e():"inline"==d.data("type")?n():"ajax"==d.data("type")?a():"vimeo"==d.data("type")?i():"youtube"==d.data("type")?o():(P.html('<img src="'+C+'">'),r()))}),h.css("opacity","1"));var T={prev:function(){D||(D=!0,v=A.data("overlay"),m=A.data("framewidth"),u=A.data("frameheight"),g=A.data("border"),f=A.data("bgcolor"),C=A.attr("href"),I=A.attr(b.titleattr)?A.attr(b.titleattr):"",void 0===v&&(v=""),h.css("min-height",t(window).outerHeight()),P.animate({opacity:0},500,function(){h.css("min-height",t(window).outerHeight()).css("background",v),"iframe"==A.data("type")?e():"inline"==A.data("type")?n():"ajax"==A.data("type")?a():"youtube"==A.data("type")?o():"vimeo"==A.data("type")?i():(P.html('<img src="'+C+'">'),r()),d=A,s(),D=!1}))},next:function(){D||(D=!0,v=O.data("overlay"),m=O.data("framewidth"),u=O.data("frameheight"),g=O.data("border"),f=O.data("bgcolor"),C=O.attr("href"),I=O.attr(b.titleattr)?O.attr(b.titleattr):"",void 0===v&&(v=""),h.css("min-height",t(window).outerHeight()),P.animate({opacity:0},500,function(){h.css("min-height",t(window).outerHeight()).css("background",v),"iframe"==O.data("type")?e():"inline"==O.data("type")?n():"ajax"==O.data("type")?a():"youtube"==O.data("type")?o():"vimeo"==O.data("type")?i():(P.html('<img src="'+C+'">'),r()),d=O,s(),D=!1}))}};t("body").keydown(function(t){37==t.keyCode&&1==z&&T.prev(),39==t.keyCode&&1==$&&T.next()}),t(".vbox-prev").click(function(){T.prev()}),t(".vbox-next").click(function(){T.next()});var G=".vbox-close, .vbox-overlay";return d.data("overlayclose")||(G=".vbox-close"),t(G).click(function(a){X=".figlio",S=".vbox-prev",Q=".vbox-next",B=".figlio *",t(a.target).is(X)||t(a.target).is(Q)||t(a.target).is(S)||t(a.target).is(B)||x()}),t("body").keydown(p),!1}))})}}),t(window).resize(function(){c()})}(jQuery),$(function(){/iPhone|iPod|iPad/.test(navigator.userAgent)&&"ontouchstart"in document.documentElement&&$("vbox-content").addClass("touch")});